{% extends "base.html" %}
{% block content %}
<div class="flex justify-center">
    <div
        class="w-full max-w-3xl glass rounded-2xl p-8 border border-slate-200 relative overflow-hidden bg-white print:bg-white print:text-black print:glass-none print:border-none print:shadow-none">

        <!-- Header -->
        <div class="flex justify-between items-start mb-8 border-b border-slate-200 pb-8 print:border-gray-300">
            <div>
                <div class="flex items-center mb-2">
                    <i class="fa-solid fa-staff-snake text-4xl gradient-text mr-2 print:text-blue-600"></i>
                    <h1 class="text-2xl font-bold font-display text-slate-900 print:text-black">DigiTechHealth</h1>
                </div>
                <p class="text-sm text-slate-500 mt-1 print:text-gray-600">Dammani Chowk, Rajasthan</p>
                <p class="text-sm text-slate-500 print:text-gray-600">rajatpurohit183@gmail.com</p>
            </div>
            <div class="text-right">
                <h2 class="text-3xl font-bold text-slate-800 mb-2 print:text-black">INVOICE</h2>
                <p class="text-slate-500 print:text-gray-600">#INV-{{ '%05d' % invoice.id }}</p>
                <p class="text-slate-500 mt-1 print:text-gray-600">Issued: {{ invoice.date_issued.strftime('%B %d, %Y')
                    }}</p>
                <span class="inline-block mt-2 px-3 py-1 rounded border text-sm font-bold
                        {% if invoice.status == 'Paid' %} border-green-500 text-green-600 bg-green-50 
                        {% else %} border-orange-500 text-orange-600 bg-orange-50 {% endif %}">
                    {{ invoice.status.upper() }}
                </span>
            </div>
        </div>

        <!-- Bill To -->
        <div class="mb-8">
            <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-2 print:text-gray-500">Bill To:</h3>
            <h4 class="text-xl font-bold text-slate-900 print:text-black">{{ invoice.patient.name }}</h4>
            <p class="text-slate-500 print:text-gray-600">{{ invoice.patient.address }}</p>
            <p class="text-slate-500 print:text-gray-600">{{ invoice.patient.contact }}</p>
        </div>

        <!-- Items -->
        <table class="w-full mb-8">
            <thead>
                <tr
                    class="bg-slate-50 text-slate-600 text-sm uppercase tracking-wider print:bg-gray-100 print:text-black">
                    <th class="p-3 text-left rounded-l-lg">Description</th>
                    <th class="p-3 text-right rounded-r-lg">Amount</th>
                </tr>
            </thead>
            <tbody>
                <tr class="border-b border-slate-100 print:border-gray-200">
                    <td class="p-4 text-slate-800 print:text-black">{{ invoice.description }}</td>
                    <td class="p-4 text-right text-slate-800 font-medium print:text-black">${{ '%.2f' % invoice.amount
                        }}
                    </td>
                </tr>
            </tbody>
        </table>

        <!-- Total -->
        <div class="flex justify-end mb-12">
            <div class="w-1/2 text-right">
                <div class="flex justify-between mb-2">
                    <span class="text-slate-500 print:text-gray-600">Subtotal</span>
                    <span class="text-slate-800 font-medium print:text-black">${{ '%.2f' % invoice.amount }}</span>
                </div>
                <div class="flex justify-between mb-2">
                    <span class="text-slate-500 print:text-gray-600">Tax (0%)</span>
                    <span class="text-slate-800 font-medium print:text-black">$0.00</span>
                </div>
                <div class="flex justify-between border-t border-slate-200 pt-4 mt-2 print:border-gray-300">
                    <span class="text-xl font-bold text-slate-900 print:text-black">Total</span>
                    <span class="text-xl font-bold text-primary print:text-blue-600">${{ '%.2f' % invoice.amount
                        }}</span>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="border-t border-slate-200 pt-8 text-center print:border-gray-300">
            <p class="text-slate-500 text-sm print:text-gray-600">Thank you for choosing DigiTechHealth. Please proceed
                with
                payment within 14 days.</p>
        </div>

        <!-- Print Actions (Hidden when printing) -->
        <div class="absolute top-4 right-4 print:hidden space-x-2">
            <button onclick="window.print()"
                class="h-10 w-10 flex items-center justify-center rounded-lg bg-slate-100 text-slate-600 hover:bg-primary hover:text-white transition-colors border border-slate-200 shadow-sm">
                <i class="fa-solid fa-print"></i>
            </button>
            <a href="{{ url_for('billing.list_invoices') }}"
                class="h-10 w-10 flex items-center justify-center rounded-lg bg-slate-100 text-slate-600 hover:bg-red-500 hover:text-white transition-colors border border-slate-200 shadow-sm">
                <i class="fa-solid fa-xmark"></i>
            </a>
        </div>
    </div>
</div>
{% endblock %}