{% extends "base.html" %}
{% block content %}
<div class="flex justify-center">
    <div class="w-full max-w-3xl glass rounded-2xl p-8 border border-slate-200 bg-white">
        <div class="mb-8 border-b border-slate-100 pb-4">
            <h2 class="text-2xl font-display font-bold text-slate-800">{{ legend }}</h2>
            <p class="text-slate-500 text-sm">Fill in the details below</p>
        </div>

        <form method="POST" action="" enctype="multipart/form-data">
            {{ form.hidden_tag() }}

            <div class="mb-6">
                <!-- Profile Picture Upload -->
                {{ form.picture.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                {{ form.picture(class="block w-full text-sm text-slate-500
                file:mr-4 file:py-2.5 file:px-4
                file:rounded-lg file:border-0
                file:text-sm file:font-semibold
                file:bg-primary/10 file:text-primary
                hover:file:bg-primary/20
                transition-colors cursor-pointer") }}
                {% if form.picture.errors %}
                <div class="mt-1 text-sm text-red-600">
                    {% for error in form.picture.errors %}
                    <span>{{ error }}</span>
                    {% endfor %}
                </div>
                {% endif %}
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Name -->
                <div>
                    {{ form.name.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                    {% if form.name.errors %}
                    {{ form.name(class="w-full bg-slate-50 border border-red-500 rounded-lg px-4 py-2.5 text-slate-800
                    focus:outline-none focus:ring-2 focus:ring-red-500") }}
                    {% else %}
                    {{ form.name(class="w-full bg-slate-50 border border-slate-300 rounded-lg px-4 py-2.5 text-slate-800
                    focus:outline-none focus:ring-2 focus:ring-primary") }}
                    {% endif %}
                </div>
                <!-- Age -->
                <div>
                    {{ form.age.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                    {{ form.age(class="w-full bg-slate-50 border border-slate-300 rounded-lg px-4 py-2.5 text-slate-800
                    focus:outline-none focus:ring-2 focus:ring-primary") }}
                </div>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                <!-- Gender -->
                <div>
                    {{ form.gender.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                    {{ form.gender(class="w-full bg-slate-50 border border-slate-300 rounded-lg px-4 py-2.5
                    text-slate-800 focus:outline-none focus:ring-2 focus:ring-primary") }}
                </div>
                <!-- Contact -->
                <div>
                    {{ form.contact.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                    {{ form.contact(class="w-full bg-slate-50 border border-slate-300 rounded-lg px-4 py-2.5
                    text-slate-800 focus:outline-none focus:ring-2 focus:ring-primary") }}
                </div>
            </div>

            <!-- Address -->
            <div class="mb-6">
                {{ form.address.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                {{ form.address(class="w-full bg-slate-50 border border-slate-300 rounded-lg px-4 py-2.5 text-slate-800
                focus:outline-none focus:ring-2 focus:ring-primary", rows=3) }}
            </div>

            <!-- Medical History -->
            <div class="mb-8">
                {{ form.medical_history.label(class="block text-sm font-medium text-slate-700 mb-2") }}
                {{ form.medical_history(class="w-full bg-slate-50 border border-slate-300 rounded-lg px-4 py-2.5
                text-slate-800 focus:outline-none focus:ring-2 focus:ring-primary", rows=3) }}
            </div>

            <div class="flex items-center space-x-4">
                {{ form.submit(class="px-8 py-3 bg-primary text-white font-bold rounded-lg hover:bg-sky-600
                transition-colors cursor-pointer shadow-lg shadow-primary/30") }}
                <a href="{{ url_for('patient.list_patients') }}"
                    class="px-6 py-3 border border-slate-300 text-slate-600 rounded-lg hover:bg-slate-50 transition-colors">Cancel</a>
            </div>

        </form>
    </div>
</div>
{% endblock %}